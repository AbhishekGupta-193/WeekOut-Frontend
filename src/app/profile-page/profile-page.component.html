<div class="profile-page">
      <!-- Header -->
  <header class="plan-header">
    <div class="header-left" (click)="backToDashboard()">
      <mat-icon class="back-icon">arrow_back</mat-icon>
      <span class="back-text">Back to Dashboard</span>
    </div>
    <div class="header-right">
      <mat-icon class="icon-btn">flag</mat-icon>
      <mat-icon class="icon-btn">share</mat-icon>
    </div>
  </header>
  <!-- Main Page Header Section -->
  <div class="profile-header">
    <div class="header-top"></div>
    <div class="header-bottom">
      <div class="profile-info">
        <div class="profile-img-wrapper">
          <img src="https://newprofilepic.photo-cdn.net//assets/images/article/profile.jpg?90af0c8" alt="Profile" class="profile-img">
          <button mat-icon-button class="camera-btn">
            <mat-icon>photo_camera</mat-icon>
          </button>
        </div>
        <div class="user-details">
          <h2>{{profileData.name}}</h2>
          <p>{{profileData.email}}</p>
          <div class="rating">
            <mat-icon class="star">star</mat-icon> 4.8
          </div>
        </div>
        <div class="action-buttons">
          <button mat-stroked-button color="primary"(click)="openDialog(editProfileDialog)">
            <mat-icon>edit</mat-icon> Edit Profile
          </button>
          <button mat-stroked-button color="warn" (click)="logout()">
            <mat-icon>logout</mat-icon> Logout
          </button>
        </div>
      </div>

      <!-- Stats Row -->
      <div class="stats-row">
        <div><span class="blue">8</span><br>Plans Hosted</div>
        <div><span class="purple">15</span><br>Plans Joined</div>
        <div><span class="yellow">4.8</span><br>Rating</div>
        <div><span class="green">5</span><br>Badges</div>
        <div><span class="red">23</span><br>Connections</div>
      </div>
    </div>
  </div>

  <!-- Toggle Section -->
   <div class="toggle-section">
       <div class="toggle-bar">
         <button [class.active]="selectedTab === 'plans'" (click)="selectedTab = 'plans'">My Plans</button>
         <button [class.active]="selectedTab === 'badges'" (click)="selectedTab = 'badges'">Badges</button>
         <button [class.active]="selectedTab === 'interests'" (click)="selectedTab = 'interests'">Interests</button>
         <button [class.active]="selectedTab === 'reviews'" (click)="selectedTab = 'reviews'">Reviews</button>
       </div>
   </div>

  <!-- Content Section -->
  <div class="content-section">
    <!-- My Plans -->
    <div *ngIf="selectedTab === 'plans'">
      <h3>Plans I've Hosted ({{plans.length}})</h3>
      <mat-card *ngFor="let plan of plans" class="plan-card">
        <div>
          <h4>{{plan.title}}</h4>
          <p><i class="fas fa-calendar"></i>{{plan.date}}</p>
        </div>
        <div>
            <span class="stars">
              <mat-icon *ngFor="let s of [].constructor(5)" class="star">star</mat-icon>
            </span>
        </div>
      </mat-card>
    </div>

    <!-- Badges -->
    <div *ngIf="selectedTab === 'badges'">
      <h3>Achievement Badges</h3>
      <div class="badges_container">
        <mat-card *ngFor="let badge of badges" class="badge-card">
          <mat-icon>{{badge.icon}}</mat-icon>
          <div class="badge_about">
            <h4>{{badge.title}}</h4>
            <p>{{badge.desc}}</p>
          </div>
        </mat-card>
      </div>
    </div>

    <!-- Interests -->
    <div *ngIf="selectedTab === 'interests'" class="interests_container">
      <h3>My Interests</h3>
      <div class="contents">
        <div class="interests">
          <span *ngFor="let interest of interests" class="interest-box">{{interest}}</span>
        </div>
        <button mat-raised-button color="primary" class="editInterestsBtn">
          <mat-icon>edit</mat-icon> Edit Interests
        </button>
      </div>
    </div>

    <!-- Reviews -->
    <div *ngIf="selectedTab === 'reviews'">
      <h3>Recent Reviews</h3>
      <div *ngFor="let r of reviews" class="review-card">
        <div class="profile-icon">{{r.initial}}</div>
        <div class="review-content">
          <div class="review-header">
            <span class="reviewer">{{r.name}}</span>
            <span class="stars">
              <mat-icon *ngFor="let s of [].constructor(r.stars)" class="star">star</mat-icon>
            </span>
          </div>
          <p class="review-text">"{{r.review}}"</p>
          <small>{{r.timeAgo}}</small>
        </div>
      </div>
    </div>
  </div>
</div>

    <!-- Signup Form -->
  <ng-template #editProfileDialog>
    <div style="display:flex; justify-content:center; font-size: 24px;margin-top: 1rem;color: #7c3aed;">
      <h4 style="margin: 0;">Edit Your Profile</h4>
    </div>
    <form [formGroup]="profileForm" (ngSubmit)="onSignupSubmit()" class="form">
        <input type="email" placeholder="Email" formControlName="email" autocomplete="email" />
        <div class="error" *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched">
          Please enter a valid email.
        </div>
        
        <input type="text" placeholder="Add Bio" formControlName="Bio"/>

        <input type="text" placeholder="Add Mobile No" formControlName="phoneNumber" />

        <label class="interests-label">Edit your interests:</label>
        <div class="interests" formArrayName="interests"
            [class.error-border]="profileForm.get('interests')?.invalid && profileForm.get('interests')?.touched">
            <label *ngFor="let interestCtrl of signupInterestsControls; let i = index" class="interest-checkbox">
                <input type="checkbox" [formControlName]="i" />
                {{ interestsList[i] }}
            </label>
        </div>
        <div class="error" *ngIf="profileForm.get('interests')?.invalid && profileForm.get('interests')?.touched">
            Please select at least one interest.
        </div>

        <button type="submit" class="submit-btn bg-gradient-to-r rounded-xl">
            Save Changes
        </button>
    </form>
  </ng-template>